# Search Engine UI

Данное приложение является интерфейсом для другого моего проекта [SearchEngine](https://github.com/ApostlShizy/SearchEngine). Для работы с ```.json``` файлами используется библиотека [nlohmann json](https://github.com/nlohmann/json?ysclid=mcevjfptjo654926929). Алгоритм поиска не претерпел значительных изменений так что за справкой можно обратиться к документации из проекта. Все изменения можно прочитать в заголовках ниже.

**Задача проекта: предоставить конечному пользователю более удобное, понятное и функциональное приложение чем оригинальный проект.**

### Основные пункты документации 
- [Изменения ConverterJson](#изменения-converterjson)
- [Интерфейс Приложения](#интерфейс-приложения)
- [Код приложения](#код-приложения)

<br>

## Изменения ConverterJSON

Касательно изменений базового алгоритма - был затронут ``ConverterJSON``. Изменён формат чтения и записи файла ``"config.json"``, а именно ...

Было: 

```json
{
    "config": {
        "name": "SearchEngine",
        "version": "0.7",
        "max_responses": 5
    },
    "files": [
        "txt example/new 1.txt",
        "txt example/new 2.txt",
        "txt example/new 3.txt",
        "txt example/new 4.txt",
        "txt example/new 5.txt",
        "txt example/new 6.txt"
    ]
}
```

Стало:

```json
{
    "config": {
        "name": "SearchEngineUi",
        "version": "0.1",
        "max_responses": 5
    },
    "files": [
        "txt example/new 1.txt",
        "txt example/new 2.txt",
        "txt example/new 3.txt",
        "txt example/new 4.txt",
        "txt example/new 5.txt",
        "txt example/new 6.txt",
		"txt example/new 7.txt"
    ],
	"requestsFile": "requests.json",
	"answerFile": "answer.json"
}
```

Теперь файл в файле конфигураций в том числе содержатся пути к файлу запроса ``` requests.json``` и файлу ответа ```answer.json```. Данные имена-пути по умолчанию.

<br>

### В самом классе появился новый метод: 

```C++
    void setConfigPath(std::vector<std::string> & docsPath,
                    std::string configPath = "config.json",
                    std::string requestsPath = "requests.json",
                    std::string answerPath = "answer.json",
                    size_t maxResponses = 5)
```

Данный метод сохраняет предустановки программы в файл конфигурации для будущей загрузки данного пресета. Если какое либо значение отсутствует - оно устанавливается по умолчанию.

<br>

### Был переработан метод ```getConfig```.

Было:
```C++
    int getConfig(std::vector<std::string>& filePath,
    std::string configPath = "config.json")
```

Стало:

```C++
    int getConfig(std::vector<std::string>& filePath,
                  std::string & requestsPath,
                  std::string & answerPath,
                  const std::string configPath = "config.json") 
```

Теперь метод в качестве аргументов ожидает не только ссылку на вектор строк для путей ```filePath```, сам путь к самому файлу конфигурации ```configPath (по умолчанию "config.json")```. А так же ссылку на путь ответа ```answerPath``` и путь к файлу запроса ```requestsPath```. При отсутствии любого из путей выбрасывается исключение и изменения не будут внесены.

Исключение из правила - путь ответа (если тот отсутствует устанавливается значение по умолчанию ```".exe/answer.json"```).

Если в файле указано недопустимое значение ```maxResponse``` устанавливается значение по умолчанию равно ```5```.

<br>
<br>

# Интерфейс приложения 

__Интерфейс приложения поделён на четыре основные вкладки:__

### 1. [Options](#Options)
### 2. [List Of Requests](#list-of-requests)
### 3. [Docs Paths](#docs-paths)
### 4. [Answer](#answer)


<br>


## Options

**Данная вкладка, отвечает за базовые настройки приложения.**

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/1.jpg?raw=true)

**В верхней - левой части приложения под вкладкой** ```Options``` расположены кнопки загрузки и сохранения пресета. Данные кнопки открывают диалоговое окно файловой системы позволяя указать путь сохранения или загрузки. __ВАЖНО ОТМЕТИТЬ ЧТО ВСЕ ИЗМЕНЕНИЯ С ЗАПРОСАМИ, ОТВЕТАМИ И СПИСКАМИ ДОКУМЕНТОВ СОХРАНЯЮТСЯ В РУЧНУЮ ЧЕРЕЗ ДАННУЮ ОПЦИЮ, НЕ ЗАБЫВАЙТЕ СОХРАНЯТЬ СВОИ ИЗМЕНЕНИЯ.__

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/2.jpg?raw=true)

    Краткая справка о том что сохраняется в пресете. В пресете сохраняется путь 
    самого файла конфигурации "config.json". В данный файл записываются пути к 
    документам, путь к файлу запроса "requests.json" и путь к файлу ответа 
    "answer.json" (если такой был сформирован).
    

**Правей кнопок сохранения и загрузки пресета** расположен путь к загруженному файла пресета.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/3.jpg?raw=true)

**Правей описания пути** - выбор языка приложения, открывается вываливающийся список. ```(в данной версии поддерживает только английский)```

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/4.jpg?raw=true)

<br>

### Ниже расположилась группа опций ```"Answer options"```.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/5.jpg?raw=true)


Как понятно из названия отвечает за настройки формирования ответа. В данной версии опции поддерживают: 

1. Включение исключения номеров ```"Enable numbers"```. ```(по умолчанию приложение игнорирует цифры)```

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/6.jpg?raw=true)

2. Сохранять ли файл ответа по указанному пути или пути по умолчанию.```"Save result in to answer.json"```. Когда изменение будет применено и сохранено текст изменит цвет на зелёный, если изменения не сохранены текст будет чёрным. ```(тут же присутствует кнопка для указания через диалоговое окно файловой системы куда именно сохранять ответ помимо ручного ввода, рекомендую использовать файловую систему)```

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/7.jpg?raw=true)

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/8.jpg?raw=true)

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/9.jpg?raw=true)

3. Обозначение максимального количества ответов на запрос ```"Max responses"```. ```(если оставить пустым будет применено  значение по умолчанию, по аналогии с путём цвет отображает статус внесённых изменений)```

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/10.jpg?raw=true)

<br>

### Под группой ```"Answer options"```. Расположена группа опций ```"Requests options"```. 

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/11.jpg?raw=true)

Отвечает за настройки запросов. В данной версии опции поддерживают: 

- Сохранять ли файл запроса по указанному пути или пути по умолчанию. ```"Save request in to requests.json"```. Когда изменение будет применено и сохранено текст изменит цвет на зелёный, если изменения не сохранены текст будет чёрным, как и в описанных выше опциях. ```(тут же присутствует кнопка для указания через диалоговое окно файловой системы куда именно сохранять ответ помимо ручного ввода, рекомендую использовать файловую систему)```

<br>

## List Of Requests

**Данная вкладка, отвечает за настройки запросов.**

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/12.jpg?raw=true)

**Начнём с левой-верхней части вкладки**, маленькая кнопка ввиду документа со стрелочкой отвечает за открытие диалогового окна файловой системы и загрузки запроса из документа типа ```"requests.json"```. После добавления новые запросы заполняют пропуски id если таковые имеются и помещаются в конец списка.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/13.jpg?raw=true)

**Правей от кнопки добавления документа** - расположены четыре опции взаимодействия со списком запросов:

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/14.jpg?raw=true)

- Add Request - Добавить запрос. Для данного действия нужно ввести желаемое id (оно не должно быть занято иначе программа выберет ближайший доступный). После через пробелы указать слова , к примеру: ```5 some words add here```. Данный ввод добавит запрос из четырёх слов, с id = 5;

- Alter Request - Редактировать запрос. Данное действие работает по принципу схожему с добавлением запроса: ```id word word word word```. При вводе id программа отобразить в списке есть ли такой запрос для редактирования и если нет ничего не случится. Редактирование происходит по принципу полной замены списка слов на новый, указанный в строке по данному id. К примеру:

    ```
    Было: 5 some words
    Стало: 5 here we alter some words and get result
    ```

- Delete Requests - Удалить запрос. Для удаления запроса достаточно просто ввести id данного запроса, ```id указан в поле "Request id: id" ```.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/15.jpg?raw=true)

- Search - Поиск запроса. Поиск происходит как по id так и по подстроке в словах

Одновременно может быть активна лишь одна опция, ```активная опция будет выделена синим```, она и отвечает за то что именно будет делать приложение во время ввода и подтверждения ввода в строке.

<br>

**Чуть правей выбора взаимодействия с запросом**, расположена сама строка ввода.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/16.jpg?raw=true)

<br>

**Под всеми виджетами, в центре -** ```"Current requests.json:"```. Перечень всех загруженных запросов. __Каждый отдельный запрос отделён пунктирной линией__

<br>

## Docs Paths

**Данная вкладка, отвечает за настройки базы данных документов.**

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/17.jpg?raw=true)

<br>

**Начнём с левой-верхней части**. Тут расположена кнопка диалога файловой системы. В самой файловой системе можно выбрать целый список и тот будет автоматически добавлен в базу данных документов а его путь выведен полностью на экран.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/18.jpg?raw=true)

<br>

**Правей от кнопки диалога файловой системы**, расположены опции взаимодействия с перечнем документов: 

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/19.jpg?raw=true)

- Add Dock - Добавить документ. Для добавление требуется ввести полный путь,добавляет всего один документ за раз. При ошибке ввода пути - документ не будет добавлен.

- Delete Dock - Удалить документ. Удаляет документ из перечня по его id, ```id написан рядом с самим документом "doc_id: id"```.

- Search - Поиск. Ищет по id документа или подстроке в описании пути к файлу.

Одновременно может быть активна лишь одна опция, ```активная опция будет выделена синим```, она и отвечает за то что именно будет делать приложение во время ввода и подтверждения ввода в строке.

**Правей от опций взаимодействия с документами** - Строка ввода.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/20.jpg?raw=true)

<br>

**Под всеми виджетами, центре экрана -** ```"All docs paths:"```. Перечень всех загруженных документов в приложение. Каждый отдельный документ разделён пунктирной линией.

<br>

## Answer

**Данная вкладка отвечает за формирование ответа на поисковый запрос и его сортировку.**

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/21.jpg?raw=true)

<br>

**Слева-вверху**, расположена кнопка ```"Form Answer"``` она отвечает за формирование ответа по записанным ранее данным: Запросам, перечню документов.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/22.jpg?raw=true)

Принцип формирования ответа был описан в [SearchEngine - Файл с ответами на запросы "answers.json"](https://github.com/ApostlShizy/SearchEngine?tab=readme-ov-file#%D1%84%D0%B0%D0%B9%D0%BB-%D1%81-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0%D0%BC%D0%B8-%D0%BD%D0%B0-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B-answersjson).

<br>

**Чуть правей кнопки** ```"Form Answer"```, выпадающий список с опциями сортировки.

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/23.jpg?raw=true)

**- Sort by rank** - Сортировать по рангу запроса, то есть по его валидности. Сортирует по диапазону. То есть для корректно сортировки нужно выбрать данную сортировку, затем ввести в строку ввода начало диапазона и конец через тире. Пример ```0.5 - 0.8```

**- Sort by doc_id** - Сортировать по id документов. Сортирует по конкретному id документа.Выбираем данную опцию, вводим id в строку поиска и в списке выводятся все ответы где встречается данный документ.

**- Sort by responses** - Сортировать по количеству ответов. Выбираем данную опцию, вводим количество интересующих нас ответов в строку поиска, и получаем все ответы в которых количество вхождений в документы равно заданному числу.

**- Sort by requests** - Сортировать по конкретному id запроса. Выбираем данную опцию, вводим id запроса, и получаем все ответы в которые входит данный запрос.

__Все сортировки работают через ввод в строку поиска. Которая расположена правей опций сортировки.__

![](https://github.com/ApostlShizy/ImageHolder/blob/main/SearchEngineUI/24.jpg?raw=true)

**Так же рядом с опциями сортировки**, есть опция сортировки **сверху-вниз/снизу-вверх** , изображена в виде стрелочек ```↑/↓```. В данной версии приложения работает только с **"Sort by rank"** опцией.

<br>
<br>

# Код приложения

Алгоритм поиска уже был описан в документации [SearchEngine](https://github.com/ApostlShizy/SearchEngine). В данном заголовке будут описаны объекты для работы с интерфейсом приложения.

### 1. optionWindow - Интерфейс приложения (Описание в работе)
### 2. searchEngine - Прослойка связывающая интерфейс приложения и поисковый алгоритм (Описание в работе)